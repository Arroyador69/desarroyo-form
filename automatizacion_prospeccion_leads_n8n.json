{
  "name": "Sistema de Prospecci√≥n Automatizada - DesArroyo Tech",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "hours",
              "hoursInterval": 6
            }
          ]
        }
      },
      "id": "trigger-cron",
      "name": "Trigger - Ejecutar cada 6 horas",
      "type": "n8n-nodes-base.cron",
      "typeVersion": 1,
      "position": [240, 300]
    },
    {
      "parameters": {
        "url": "https://api.scrapingbee.com/api/v1/",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "api_key",
              "value": "{{ $env.SCRAPINGBEE_API_KEY }}"
            }
          ]
        },
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "url",
              "value": "https://www.google.com/search?q=restaurantes+[CIUDAD]+sin+pagina+web"
            },
            {
              "name": "render_js",
              "value": "false"
            },
            {
              "name": "extract_rules",
              "value": "{\"businesses\":{\"selector\":\".g\",\"type\":\"list\",\"output\":{\"name\":\".LC20lb\",\"address\":\".LwV2X\",\"phone\":\".LwV2X\",\"website\":\"a[href*='http']\"}}}}"
            }
          ]
        }
      },
      "id": "scraper-google",
      "name": "Scraper - Google B√∫squeda",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [460, 300]
    },
    {
      "parameters": {
        "url": "https://api.scrapingbee.com/api/v1/",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "api_key",
              "value": "{{ $env.SCRAPINGBEE_API_KEY }}"
            }
          ]
        },
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "url",
              "value": "https://www.paginasamarillas.es/buscar/[SECTOR]/[CIUDAD]"
            },
            {
              "name": "render_js",
              "value": "false"
            },
            {
              "name": "extract_rules",
              "value": "{\"businesses\":{\"selector\":\".listing-item\",\"type\":\"list\",\"output\":{\"name\":\".business-name\",\"address\":\".address\",\"phone\":\".phone\",\"website\":\".website\"}}}}"
            }
          ]
        }
      },
      "id": "scraper-paginas-amarillas",
      "name": "Scraper - P√°ginas Amarillas",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [460, 500]
    },
    {
      "parameters": {
        "url": "https://api.scrapingbee.com/api/v1/",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "api_key",
              "value": "{{ $env.SCRAPINGBEE_API_KEY }}"
            }
          ]
        },
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "url",
              "value": "https://www.linkedin.com/search/results/companies/?keywords=[SECTOR]&location=[CIUDAD]"
            },
            {
              "name": "render_js",
              "value": "false"
            },
            {
              "name": "extract_rules",
              "value": "{\"companies\":{\"selector\":\".search-result\",\"type\":\"list\",\"output\":{\"name\":\".company-name\",\"industry\":\".industry\",\"size\":\".company-size\",\"website\":\".website\"}}}}"
            }
          ]
        }
      },
      "id": "scraper-linkedin",
      "name": "Scraper - LinkedIn",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [460, 700]
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combine",
        "options": {}
      },
      "id": "merge-sources",
      "name": "Merge - Combinar Fuentes",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 2.1,
      "position": [680, 500]
    },
    {
      "parameters": {
        "jsCode": "// Filtrar y limpiar datos de leads\nconst leads = $input.all();\nconst filteredLeads = [];\n\nfor (const item of leads) {\n  const business = item.json;\n  \n  // Verificar si tiene datos b√°sicos\n  if (business.name && business.phone) {\n    \n    // Filtrar por sectores con potencial\n    const highValueSectors = [\n      'restaurante', 'caf√©', 'bar', 'pizzer√≠a', 'comida',\n      'peluquer√≠a', 'barber√≠a', 'est√©tica', 'belleza',\n      'dentista', 'm√©dico', 'fisioterapeuta', 'cl√≠nica',\n      'abogado', 'notario', 'asesor', 'consultor',\n      'tienda', 'comercio', 'negocio', 'empresa',\n      'hotel', 'hostal', 'alojamiento',\n      'gimnasio', 'fitness', 'deporte',\n      'autoescuela', 'taller', 'mec√°nico'\n    ];\n    \n    const sectorMatch = highValueSectors.some(sector => \n      business.name.toLowerCase().includes(sector) ||\n      (business.industry && business.industry.toLowerCase().includes(sector))\n    );\n    \n    if (sectorMatch) {\n      // Limpiar y formatear datos\n      const cleanLead = {\n        name: business.name.trim(),\n        phone: business.phone.replace(/[^0-9+]/g, ''),\n        address: business.address || '',\n        website: business.website || '',\n        industry: business.industry || '',\n        source: item.source || 'unknown',\n        score: 0,\n        status: 'new',\n        timestamp: new Date().toISOString()\n      };\n      \n      // Calcular score inicial\n      if (!cleanLead.website || cleanLead.website === '') {\n        cleanLead.score += 30; // Sin web = alta prioridad\n      }\n      \n      if (cleanLead.phone && cleanLead.phone.length > 8) {\n        cleanLead.score += 20; // Tiene tel√©fono v√°lido\n      }\n      \n      if (cleanLead.address && cleanLead.address.length > 10) {\n        cleanLead.score += 15; // Tiene direcci√≥n\n      }\n      \n      // Score por sector\n      if (['restaurante', 'peluquer√≠a', 'dentista', 'abogado'].some(s => \n        cleanLead.name.toLowerCase().includes(s))) {\n        cleanLead.score += 25; // Sectores de alto valor\n      }\n      \n      filteredLeads.push(cleanLead);\n    }\n  }\n}\n\n// Eliminar duplicados por tel√©fono\nconst uniqueLeads = [];\nconst seenPhones = new Set();\n\nfor (const lead of filteredLeads) {\n  if (!seenPhones.has(lead.phone)) {\n    seenPhones.add(lead.phone);\n    uniqueLeads.push(lead);\n  }\n}\n\n// Ordenar por score\nuniqueLeads.sort((a, b) => b.score - a.score);\n\nreturn uniqueLeads.map(lead => ({ json: lead }));"
      },
      "id": "filter-leads",
      "name": "Filter - Filtrar y Calificar Leads",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [900, 500]
    },
    {
      "parameters": {
        "url": "https://api.openai.com/v1/chat/completions",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer {{ $env.OPENAI_API_KEY }}"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "model",
              "value": "gpt-4"
            },
            {
              "name": "messages",
              "value": "=[\n  {\n    \"role\": \"system\",\n    \"content\": \"Eres un asistente de ventas experto en desarrollo web. Tu objetivo es generar inter√©s en servicios de p√°ginas web profesionales. S√© amigable, profesional y enfocado en los beneficios para el negocio.\"\n  },\n  {\n    \"role\": \"user\",\n    \"content\": \"Genera un mensaje de WhatsApp personalizado para contactar a {{ $json.name }} que es un negocio de {{ $json.industry || 'servicios' }}. El mensaje debe ser corto, directo y generar inter√©s en una p√°gina web profesional. Incluye una pregunta que invite a la respuesta.\"\n  }\n]"
            },
            {
              "name": "max_tokens",
              "value": "200"
            },
            {
              "name": "temperature",
              "value": "0.7"
            }
          ]
        }
      },
      "id": "ai-message-generator",
      "name": "AI - Generar Mensaje Personalizado",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [1120, 500]
    },
    {
      "parameters": {
        "url": "https://api.twilio.com/2010-04-01/Accounts/{{ $env.TWILIO_ACCOUNT_SID }}/Messages.json",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Basic {{ $env.TWILIO_AUTH_TOKEN }}"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "From",
              "value": "whatsapp:{{ $env.TWILIO_WHATSAPP_NUMBER }}"
            },
            {
              "name": "To",
              "value": "=whatsapp:{{ $json.phone }}"
            },
            {
              "name": "Body",
              "value": "={{ $('AI - Generar Mensaje Personalizado').item.json.choices[0].message.content }}"
            }
          ]
        }
      },
      "id": "twilio-whatsapp",
      "name": "Twilio - Enviar WhatsApp",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [1340, 500]
    },
    {
      "parameters": {
        "url": "https://api.telegram.org/bot{{ $env.TELEGRAM_BOT_TOKEN }}/sendMessage",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "chat_id",
              "value": "{{ $env.TELEGRAM_CHAT_ID }}"
            },
            {
              "name": "text",
              "value": "=üöÄ **NUEVO LEAD CONTACTADO**\n\nüìã **Negocio:** {{ $json.name }}\nüìû **Tel√©fono:** {{ $json.phone }}\nüè¢ **Sector:** {{ $json.industry || 'No especificado' }}\nüìç **Direcci√≥n:** {{ $json.address || 'No especificada' }}\n‚≠ê **Score:** {{ $json.score }}/100\nüìä **Fuente:** {{ $json.source }}\n\n‚úÖ Mensaje enviado v√≠a WhatsApp\n‚è∞ {{ new Date().toLocaleString('es-ES') }}"
            },
            {
              "name": "parse_mode",
              "value": "Markdown"
            }
          ]
        }
      },
      "id": "telegram-notification",
      "name": "Telegram - Notificar Lead",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [1560, 500]
    },
    {
      "parameters": {
        "url": "https://api.openai.com/v1/chat/completions",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer {{ $env.OPENAI_API_KEY }}"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "model",
              "value": "gpt-4"
            },
            {
              "name": "messages",
              "value": "=[\n  {\n    \"role\": \"system\",\n    \"content\": \"Eres un asistente de ventas experto en desarrollo web. Analiza la respuesta del cliente y determina la mejor acci√≥n a seguir. Si el cliente muestra inter√©s, ofrece la encuesta de evaluaci√≥n. Si no, intenta generar m√°s inter√©s.\"\n  },\n  {\n    \"role\": \"user\",\n    \"content\": \"El cliente {{ $json.customer_name }} respondi√≥: '{{ $json.message }}'. ¬øCu√°l es la mejor respuesta? Opciones: 1) Enviar encuesta de evaluaci√≥n, 2) Generar m√°s inter√©s, 3) Programar llamada, 4) Agradecer y cerrar.\"\n  }\n]"
            },
            {
              "name": "max_tokens",
              "value": "150"
            },
            {
              "name": "temperature",
              "value": "0.7"
            }
          ]
        }
      },
      "id": "ai-response-analyzer",
      "name": "AI - Analizar Respuesta Cliente",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [1780, 500]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "condition-1",
              "leftValue": "={{ $json.choices[0].message.content.toLowerCase() }}",
              "rightValue": "encuesta",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "if-interested",
      "name": "IF - Cliente Interesado",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [2000, 500]
    },
    {
      "parameters": {
        "url": "https://api.twilio.com/2010-04-01/Accounts/{{ $env.TWILIO_ACCOUNT_SID }}/Messages.json",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Basic {{ $env.TWILIO_AUTH_TOKEN }}"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "From",
              "value": "whatsapp:{{ $env.TWILIO_WHATSAPP_NUMBER }}"
            },
            {
              "name": "To",
              "value": "=whatsapp:{{ $('Webhook - Respuesta Cliente').item.json.phone }}"
            },
            {
              "name": "Body",
              "value": "¬°Perfecto! üéâ Para poder ofrecerte la mejor soluci√≥n para tu negocio, necesito que completes esta breve encuesta:\n\nüîó {{ $env.WEBSITE_URL }}/encuesta-evaluacion\n\nEs s√∫per r√°pida (2 minutos) y me ayudar√° a entender exactamente lo que necesitas. ¬øTe parece bien?"
            }
          ]
        }
      },
      "id": "send-survey",
      "name": "Twilio - Enviar Encuesta",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [2220, 400]
    },
    {
      "parameters": {
        "url": "https://api.telegram.org/bot{{ $env.TELEGRAM_BOT_TOKEN }}/sendMessage",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "chat_id",
              "value": "{{ $env.TELEGRAM_CHAT_ID }}"
            },
            {
              "name": "text",
              "value": "=üéØ **LEAD CALIENTE - ENCUESTA ENVIADA**\n\nüìã **Cliente:** {{ $('Webhook - Respuesta Cliente').item.json.customer_name }}\nüìû **Tel√©fono:** {{ $('Webhook - Respuesta Cliente').item.json.phone }}\nüí¨ **Respuesta:** {{ $('Webhook - Respuesta Cliente').item.json.message }}\n\n‚úÖ Encuesta enviada\n‚è∞ {{ new Date().toLocaleString('es-ES') }}"
            },
            {
              "name": "parse_mode",
              "value": "Markdown"
            }
          ]
        }
      },
      "id": "telegram-hot-lead",
      "name": "Telegram - Lead Caliente",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [2440, 400]
    },
    {
      "parameters": {
        "url": "https://api.twilio.com/2010-04-01/Accounts/{{ $env.TWILIO_ACCOUNT_SID }}/Messages.json",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Basic {{ $env.TWILIO_AUTH_TOKEN }}"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "From",
              "value": "whatsapp:{{ $env.TWILIO_WHATSAPP_NUMBER }}"
            },
            {
              "name": "To",
              "value": "=whatsapp:{{ $('Webhook - Respuesta Cliente').item.json.phone }}"
            },
            {
              "name": "Body",
              "value": "=Entiendo perfectamente. {{ $('AI - Analizar Respuesta Cliente').item.json.choices[0].message.content }}\n\n¬øTe gustar√≠a que te cuente m√°s sobre c√≥mo una web profesional puede ayudar a tu negocio a conseguir m√°s clientes?"
            }
          ]
        }
      },
      "id": "follow-up-message",
      "name": "Twilio - Mensaje de Seguimiento",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [2220, 600]
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "webhook-respuesta-cliente",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "webhook-respuesta-cliente",
      "name": "Webhook - Respuesta Cliente",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [1780, 700],
      "webhookId": "respuesta-cliente"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "webhook-encuesta-completada",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "webhook-encuesta",
      "name": "Webhook - Encuesta Completada",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [2440, 700],
      "webhookId": "encuesta-completada"
    },
    {
      "parameters": {
        "url": "https://api.telegram.org/bot{{ $env.TELEGRAM_BOT_TOKEN }}/sendMessage",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "chat_id",
              "value": "{{ $env.TELEGRAM_CHAT_ID }}"
            },
            {
              "name": "text",
              "value": "=üéâ **¬°ENCUESTA COMPLETADA!**\n\nüìã **Cliente:** {{ $json.customer_name }}\nüìû **Tel√©fono:** {{ $json.phone }}\nüíº **Sector:** {{ $json.business_type }}\nüí∞ **Presupuesto:** {{ $json.budget }}\n‚è∞ **Urgencia:** {{ $json.urgency }}\n\nüìä **Detalles del proyecto:**\n{{ $json.project_details }}\n\nüöÄ **¬°LEAD LISTO PARA VENTA!**\n‚è∞ {{ new Date().toLocaleString('es-ES') }}"
            },
            {
              "name": "parse_mode",
              "value": "Markdown"
            }
          ]
        }
      },
      "id": "telegram-survey-completed",
      "name": "Telegram - Encuesta Completada",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [2660, 700]
    },
    {
      "parameters": {
        "url": "https://api.twilio.com/2010-04-01/Accounts/{{ $env.TWILIO_ACCOUNT_SID }}/Messages.json",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Basic {{ $env.TWILIO_AUTH_TOKEN }}"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "From",
              "value": "whatsapp:{{ $env.TWILIO_WHATSAPP_NUMBER }}"
            },
            {
              "name": "To",
              "value": "=whatsapp:{{ $json.phone }}"
            },
            {
              "name": "Body",
              "value": "¬°Excelente! üéâ He recibido tu encuesta y veo que tienes un proyecto muy interesante.\n\nTe voy a contactar en los pr√≥ximos 30 minutos para revisar todos los detalles y hacerte una propuesta personalizada.\n\n¬øTe parece bien si te llamo al {{ $json.phone }}?"
            }
          ]
        }
      },
      "id": "confirm-call",
      "name": "Twilio - Confirmar Llamada",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [2880, 700]
    },
    {
      "parameters": {
        "jsCode": "// Generar reporte diario de m√©tricas\nconst today = new Date().toISOString().split('T')[0];\n\n// Aqu√≠ normalmente consultar√≠as una base de datos\n// Por ahora simulamos datos\nconst reportData = {\n  date: today,\n  totalLeadsFound: 45,\n  leadsContacted: 23,\n  responsesReceived: 8,\n  surveysSent: 5,\n  surveysCompleted: 2,\n  hotLeads: 3,\n  conversionRate: '8.7%',\n  topSectors: ['Restaurantes', 'Peluquer√≠as', 'Dentistas'],\n  bestSources: ['Google', 'P√°ginas Amarillas', 'LinkedIn']\n};\n\nreturn [{ json: reportData }];"
      },
      "id": "generate-daily-report",
      "name": "Code - Generar Reporte Diario",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [3100, 500]
    },
    {
      "parameters": {
        "url": "https://api.telegram.org/bot{{ $env.TELEGRAM_BOT_TOKEN }}/sendMessage",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "chat_id",
              "value": "{{ $env.TELEGRAM_CHAT_ID }}"
            },
            {
              "name": "text",
              "value": "=üìä **REPORTE DIARIO - PROSPECCI√ìN AUTOMATIZADA**\n\nüìÖ **Fecha:** {{ $json.date }}\n\nüîç **Leads Encontrados:** {{ $json.totalLeadsFound }}\nüìû **Leads Contactados:** {{ $json.leadsContacted }}\nüí¨ **Respuestas Recibidas:** {{ $json.responsesReceived }}\nüìã **Encuestas Enviadas:** {{ $json.surveysSent }}\n‚úÖ **Encuestas Completadas:** {{ $json.surveysCompleted }}\nüî• **Leads Calientes:** {{ $json.hotLeads }}\nüìà **Tasa Conversi√≥n:** {{ $json.conversionRate }}\n\nüèÜ **Mejores Sectores:**\n{{ $json.topSectors.join(', ') }}\n\nüìä **Mejores Fuentes:**\n{{ $json.bestSources.join(', ') }}\n\n‚è∞ {{ new Date().toLocaleString('es-ES') }}"
            },
            {
              "name": "parse_mode",
              "value": "Markdown"
            }
          ]
        }
      },
      "id": "telegram-daily-report",
      "name": "Telegram - Reporte Diario",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [3320, 500]
    }
  ],
  "connections": {
    "Trigger - Ejecutar cada 6 horas": {
      "main": [
        [
          {
            "node": "Scraper - Google B√∫squeda",
            "type": "main",
            "index": 0
          },
          {
            "node": "Scraper - P√°ginas Amarillas",
            "type": "main",
            "index": 0
          },
          {
            "node": "Scraper - LinkedIn",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Scraper - Google B√∫squeda": {
      "main": [
        [
          {
            "node": "Merge - Combinar Fuentes",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Scraper - P√°ginas Amarillas": {
      "main": [
        [
          {
            "node": "Merge - Combinar Fuentes",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Scraper - LinkedIn": {
      "main": [
        [
          {
            "node": "Merge - Combinar Fuentes",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "Merge - Combinar Fuentes": {
      "main": [
        [
          {
            "node": "Filter - Filtrar y Calificar Leads",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter - Filtrar y Calificar Leads": {
      "main": [
        [
          {
            "node": "AI - Generar Mensaje Personalizado",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI - Generar Mensaje Personalizado": {
      "main": [
        [
          {
            "node": "Twilio - Enviar WhatsApp",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Twilio - Enviar WhatsApp": {
      "main": [
        [
          {
            "node": "Telegram - Notificar Lead",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook - Respuesta Cliente": {
      "main": [
        [
          {
            "node": "AI - Analizar Respuesta Cliente",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI - Analizar Respuesta Cliente": {
      "main": [
        [
          {
            "node": "IF - Cliente Interesado",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF - Cliente Interesado": {
      "main": [
        [
          {
            "node": "Twilio - Enviar Encuesta",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Twilio - Mensaje de Seguimiento",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Twilio - Enviar Encuesta": {
      "main": [
        [
          {
            "node": "Telegram - Lead Caliente",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook - Encuesta Completada": {
      "main": [
        [
          {
            "node": "Telegram - Encuesta Completada",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Telegram - Encuesta Completada": {
      "main": [
        [
          {
            "node": "Twilio - Confirmar Llamada",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code - Generar Reporte Diario": {
      "main": [
        [
          {
            "node": "Telegram - Reporte Diario",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [
    {
      "createdAt": "2024-01-01T00:00:00.000Z",
      "updatedAt": "2024-01-01T00:00:00.000Z",
      "id": "prospeccion-leads",
      "name": "Prospecci√≥n Leads"
    }
  ],
  "triggerCount": 1,
  "updatedAt": "2024-01-01T00:00:00.000Z",
  "versionId": "1"
} 